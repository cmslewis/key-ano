//
// base.less
// =========
// A set of styles that give the page its basic visual structure.
//

@import '../vendor/lesshat';
@import 'utils';
@import 'variables';


// Variables
// =========

@z-index-of-header : 2;
@z-index-of-panels : 1;
@z-index-of-footer : 2;

@panel-right-stacked-width         : 60%;
@panel-right-stacked-preview-width : 52.5%;

@num-white-keyano-keys : 8;

// Reset
// =====

* {
  .box-sizing(border-box);
  .user-select(none);
  margin     : 0;
  padding    : 0;
}


// Styles
// ======

body {
  .absolute-fill();
  cursor    : default;
  overflow  : hidden;
}

.header {
  .absolute-fill();
  bottom   : auto;
  overflow : hidden;
  z-index  : @z-index-of-header;

  &.primary {
    .height-with-vertically-centered-text(@header-primary-height);
    text-align : center;

    .logo, .title {
      line-height : 1.2;
    }
  }

  &.secondary {
    .height-with-vertically-centered-text(@header-secondary-height);
  }
}

.panels {
  .absolute-fill();
  top     : @header-primary-height;
  right   : 0;
  bottom  : @footer-height;
  left    : 0;
  z-index : @z-index-of-panels;

  .panel {
    .absolute-fill();
    .transition(all @animation-duration);
  }
}

// Keyano Instrument
// =================

.keyano-instrument {
  height  : 100%;
  padding : 50px;
}

.key-group {
  height : 100%;
}

.keyano-key-box-shadows(@depth:50px, @l-box-shadow-dist:3px, @l-box-shadow-blur:2px, @l-box-shadow-color:white, @l-box-shadow-opacity:1, @r-box-shadow-dist:3px, @r-box-shadow-blur:2px, @r-box-shadow-color:white, @r-box-shadow-opacity:1) {
  .box-shadow(
    0 1px 1px rgba(0,0,0,0.05),
    0 @depth 0 rgba(0,0,0,0.1),
    inset  @l-box-shadow-dist 0 @l-box-shadow-blur fade(@l-box-shadow-color, @l-box-shadow-opacity),
    inset -@r-box-shadow-dist 0 @r-box-shadow-blur fade(@r-box-shadow-color, @r-box-shadow-opacity),
    inset 0 -3px 2px rgba(255,255,255,1)
  );
}

.leftmost-keyano-key-depressed() {
  .keyano-key-box-shadows(
    @depth                : 25px,
    @r-box-shadow-dist    : 5px,
    @r-box-shadow-blur    : 5px,
    @r-box-shadow-color   : black,
    @r-box-shadow-opacity : 7%
  );
}

.middle-keyano-key-depressed() {
  .keyano-key-box-shadows(
    @depth                : 25px,
    @l-box-shadow-dist    : 5px,
    @l-box-shadow-blur    : 5px,
    @l-box-shadow-color   : black,
    @l-box-shadow-opacity : 7%,
    @r-box-shadow-dist    : 5px,
    @r-box-shadow-blur    : 5px,
    @r-box-shadow-color   : black,
    @r-box-shadow-opacity : 7%
  );
}

.rightmost-keyano-key-depressed() {
  .keyano-key-box-shadows(
    @depth                : 25px,
    @l-box-shadow-dist    : 5px,
    @l-box-shadow-blur    : 5px,
    @l-box-shadow-color   : black,
    @l-box-shadow-opacity : 7%
  );
}

.keyano-key {
  .border-radius(0 0 10px 10px);
  // .box-shadow(
  //   0 1px 1px rgba(0,0,0,0.05),
  //   0 50px 0 rgba(0,0,0,0.1),
  //   inset 3px 0 2px rgba(255,255,255,1),
  //   inset -3px 0 2px rgba(255,255,255,1),
  //   inset 0 -3px 2px rgba(255,255,255,1)
  // );
  // .transition(all @animation-duration/2);
  background    : #f9f9f9;
  border        : 1px solid #ccc;
  float         : left;
  height        : 95%;
  margin-right  : -1px;
  position      : relative;
  text-align    : center;
  width         : 100% / @num-white-keyano-keys;

  &:last-child {
    margin-right : 0;
  }

  &.depressed {
    // .transition(all @animation-duration);
    // .middle-keyano-key-depressed();
    background-color : red;
    // height : calc(~"95% - -25px"); // Hack because + doesn't get compiled correctly

    // &:first-child {
    //   .leftmost-keyano-key-depressed();
    // }

    // &:last-child {
    //   .rightmost-keyano-key-depressed();
    // }
  }
}

.keyano-key .piano-key-label {
  bottom      : 0;
  color       : #bbb;
  font-style  : italic;
  left        : 0;
  line-height : 30px;
  position    : absolute;
  right       : 0;
}

.keyano-key .keyboard-key-label {
  bottom      : 30px;
  font-weight : bold;
  left        : 0;
  line-height : 30px;
  position    : absolute;
  right       : 0;
}

.footer {
  .absolute-fill();
  .height-with-vertically-centered-text(@footer-height);
  top     : auto;
  z-index : @z-index-of-footer;

  .bottom-text {
    float : right;
  }

  .footer-buttons {
    float     : left;
    font-size : 0;

    .footer-button {
      display : inline-block;
    }
  }
}


// Device-Dependent Styles
// =======================

@media(max-width : 1060px) {

  // Hide the instructions if there isn't enough horizontal space for them.

  .footer {

    .bottom-text {

      .instructions {
        display : none;
      }
    }
  }
}

@media(max-width : 768px) {

  @mobile-header-secondary-height : 46px;
  @mobile-footer-height           : 36px;

  .header {

    &.secondary {
      .height-with-vertically-centered-text(@mobile-header-secondary-height);
    }
  }

  // Stack panels vertically.

  .panels {
    bottom : @mobile-footer-height;
  }

  // Disable footer buttons.

  .footer {
    .height-with-vertically-centered-text(@mobile-footer-height);
  }
}
